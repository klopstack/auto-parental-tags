name: 'ðŸ”¨ Build and Upload Release Artifact'

on:
  release:
    types:
      - published

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1

      - name: Setup .NET
        uses: actions/setup-dotnet@6bd8b7f7774af54e05809fcc5431931b3eb1ddee # v4.0.1
        with:
          dotnet-version: '9.x'

      - name: Restore Dependencies
        run: dotnet restore Jellyfin.Plugin.AutoParentalTags.sln

      - name: Build Release
        run: dotnet publish --configuration=Release Jellyfin.Plugin.AutoParentalTags.sln

      - name: Upload Release Artifact
        uses: softprops/action-gh-release@69032c65712baa18c7f3d7e3f2ff0ad009aab4ec # v2.0.5
        with:
          files: Jellyfin.Plugin.AutoParentalTags/bin/Release/net9.0/publish/Jellyfin.Plugin.AutoParentalTags.dll
